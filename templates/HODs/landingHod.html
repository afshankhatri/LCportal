<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LC collect</title>
    
    <style>
        /* Basic styling */
        body {
          font-family: Arial, sans-serif;
        }
    
        .btn {
          padding: 10px 20px;
          background-color: #6c757d;
          color: white;
          border: none;
          cursor: pointer;
          border-radius: 5px;
        }
    
        /* Modal styles */
        .modal {
          display: none; /* Hidden by default */
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5); /* Overlay */
          justify-content: center;
          align-items: center;
          z-index: 1000;
        }
    
        .modal-content {
          background-color: white;
          padding: 20px;
          width: 400px;
          border-radius: 10px;
          position: relative;
        }
    
        .close-btn {
          position: absolute;
          top: 10px;
          right: 15px;
          font-size: 18px;
          cursor: pointer;
        }

        /*for rejection */
        /*
    #modal_overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(2px);
      z-index: 999;
    }

    #modal_popup_container {
      background: #fff;
      width: 400px;
      max-width: 90%;
      margin: 10% auto;
      padding: 20px;
      border-radius: 4px;
      position: relative;
      animation: fade_in_modal 0.3s ease;
    }

    @keyframes fade_in_modal {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .modal_close_button {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 20px;
      cursor: pointer;
      border: none;
      background: none;
    }

    .form_label {
      display: block;
      margin-top: 15px;
      margin-bottom: 5px;
      font-weight: 500;
    }

    .form_select_dropdown,
    .form_textarea_input {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      border: 1px solid #aaa;
      border-radius: 3px;
    }

    .form_textarea_input {
      resize: vertical;
      min-height: 80px;
    }

    #final_reject_button {
      margin-top: 20px;
      padding: 8px 12px;
      border: none;
      background: #ddd;
      cursor: pointer;
    }

    .modal_center_wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    }
      */
      </style>

    <link rel="stylesheet" href="/static/css/HOD/landingHOD.css">
</head>
<body> 
    <h2>Landing Page Of HOD</h2>
    <a id="accepted" href="/HODacceptedForms">Accepted</a>
    <br/><br/>
    <a id="rejected" href="/HODrejectedForms">Rejected</a>

 
    <br><br/>
    {% for stud in studentDetails %}
        <div class="card">
            
            <div class="card-body">
              
              <!-- preview Info strt -->
                <!-- <p><strong>Name:</strong> {{stud.name}}</p>  -->
                          <!-- NOTE :  name is not appearing ... since it is not getting imported from user table to students tabel ... put a query in such a way that it store the name in the students table as well -->
                <p><strong>G_R_No:</strong> {{stud.GR_no}}</p>
                <p><strong>Branch:</strong> {{stud.courseName}}</p>
                {% if stud.hod_approval_status == 1%}
                    <button disabled>Approved</button>
                {% else %}
                    <button onclick="this.disabled = true; setApproval('{{ stud.sr_no }}')">Approve</button>
                {% endif %}
              
                <button class="btn btn-secondary" onclick="openModal('{{ stud.courseName }}', '{{ stud.user_id }}', '{{ stud.courseName }}', '{{stud.GR_no}}' ,'{{ stud.sr_no }}') ">View Details</button>

                {% if stud.hod_approval_status ==2 %}
                    <button disabled>Rejected</button>
                {% else %}
                    <button onclick="this.disabled = true; setRejection('{{ stud.sr_no }}')">Reject</button>        
                    <!-- <button id="trigger_reject_modal_button">Reject</button>

                    <div id="modal_overlay">
                      <div class="modal_center_wrapper">
                        <div id="modal_popup_container">

                          <button class="modal_close_button" id="close_modal_icon">&times;</button>

                          <label for="remarks_select_field" class="form_label">Remarks</label>
                          <select id="remarks_select_field" class="form_select_dropdown">
                            <option value="Form filled improperly">Form filled improperly</option>
                            <option value="Insufficient data">Insufficient data</option>
                            <option value="Irrelevant submission">Irrelevant submission</option>
                            <option value="Fake entry">Fake entry</option>
                            <option value="Other">Other</option>
                          </select>

                          <label for="custom_rejection_reason_input" class="form_label">Rejection Reason</label>
                          <textarea id="custom_rejection_reason_input" class="form_textarea_input" placeholder="Enter reason here..."></textarea>

                          <button onclick="this.disabled = true; setRejection('{{ stud.sr_no }}')">Reject</button>
                        </div>
                      </div>
                    </div> -->


                {% endif %}
                <!-- preview Info end -->


                <!-- Modal for details  start-->
                <div class="modal" id="userModal">
                    <div class="modal-content">
                        <span class="close-btn" onclick="closeModal()">&times;</span>
                        <h3>User Details</h3>
                        <p><strong>Name:</strong> <span id="modalName"></span></p>
                        <p><strong>Email:</strong> <span id="modalEmail"></span></p>
                        <p><strong>Branch:</strong> <span id="modalBranch"></span></p>
                        <p><strong>GR_no:</strong> <span id="modalGRNo"></span></p>
                        <!-- Add more user info here -->

                        <br>
                        <!-- for approval -->
                        {% if stud.hod_approval_status == 1%}
                            <button id="modalApproveBtn" disabled>Approved</button>
                        {% else %}
                            <button id="modalApproveBtn" onclick="this.disabled = true; setApproval('{{ stud.sr_no }}')">Approve</button>
                        {% endif %}

                        <!-- for rejection -->
                        {% if stud.hod_approval_status == 2%}
                            <button id="modalApproveBtn" disabled>Rejected</button>
                        {% else %}
                            <button id="modalApproveBtn" onclick="this.disabled = true; setRejection('{{ stud.sr_no }}')">Reject</button>
                        {% endif %}
                    </div>
                </div>
                <!-- Modal for details end -->

            </div>
        </div>  
    {% endfor %}

    <script src="/static/js/HOD/landingHOD.js"></script>
    
</body>
</html>

<!-- we need to write js/python code for displaying the branch name as we have now written it a 0=aiml and so on so we cannot display it diriectly -->

<!-- instead of inserting the (rejection == 2) directly in to the python code what we can do is that ,create a form for rejction ... take value and then submit .. and update the hod_approval_status =2 in the eg given : 
        [ isSubmitted = request.form.get('isSubmitted', '1') ] ... for this we need to write the js functioin for rejection from scratch .... properly by taking student id in param's and then updating it acc.-->